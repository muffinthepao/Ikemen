<!-- <div id="map"></div> -->

<!-- 
 The `defer` attribute causes the callback to execute after the full HTML
 document has been parsed. For non-blocking uses, avoiding race conditions,
 and consistent behavior across browsers, consider loading using Promises
 with https://www.npmjs.com/package/@googlemaps/js-api-loader.
-->
<!-- <div id="sidebar">
  <h2>Results</h2>
  <ul id="places"></ul>
  <button id="more">Load more results</button>
</div>

<script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDLpBPszhddVAwMvzIWN-CATtclvdq-PAo&callback=initMap&libraries=places&v=weekly"
  defer
></script> -->

<div id='map'></div>
<script>
let long = 103.82020348793333;
let lat = 1.36548045615708;
let singaporeLngLat = [long, lat];

mapboxgl.accessToken =
  "pk.eyJ1IjoiZ3VuZHVzdGFuIiwiYSI6ImNsNjdubmYzNzA1MDgza3FoaWxoaXhlaTkifQ.1C5TzAc0lhTVxr2q3yedbg";

navigator.geolocation.getCurrentPosition(successLocation, errorLocation, {
  enableHighAccuracy: true,
});

function successLocation(position) {
  console.log(position);
  setupMap([position.coords.longitude, position.coords.latitude]);
}

function errorLocation(position) {
  setupMap([-2.24, 53.48]);
}

function setupMap(center) {
  const map = new mapboxgl.Map({
    container: "map",
    style: "mapbox://styles/mapbox/streets-v11",
    center: center,
    zoom: 11,
  });

const marker2 = new mapboxgl.Marker({ color: 'red'})
.setLngLat(singaporeLngLat)
.addTo(map);
}

</script>
